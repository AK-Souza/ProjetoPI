#{extends 'main.html' /}
#{set title:'Home' /}

<div class="container">
<h1 style="margin-top: 2%;">Listagem de Livros</h1>

<form action="@{Livros.listar}">
	<div class="row">
		<div class="col-12">
			<label class="form-label">Termo de busca:</label>
		</div>
		<div class="col-10">
			<input type="text" name="termo" class="form-control" />
		</div>
		<input type="submit" value="Pesquisar" class="btn btn-outline-success btn-sm col-2" />
	</div>
	#{if termo}
		<small>Pesquisando por: ${termo}</small>
	#{/if}
	#{else}
		<small>Pesquisando por: TODOS</small>
	#{/else}
</form>


<table class="table table-striped table-hover">
	<thead>
	 	<tr>
      		<th>Título</th>
      		<th>Descrição do livro</th>
      		<th>Autore</th>
      		<th>Estoque</th>
      	</tr>
	</thead>
	<tbody>
		#{list items: livro, as:'li'}
		<tr>
      		<td>${li.titulo}</td>
      		<td>${li.desc}</td>
      		<td>${li.autore}</td>
      		<td>${li.estoque}</td>
      		<td><a href="@{Livros.remover(li.id)}" class="btn btn-danger btn-sm">Remover</a></td>
			<td><a href="@{Livros.editar(li.id)}" class="btn btn-success btn-sm">Editar</a></td>

      	</tr>
      	#{/list}
	</tbody>
</table>


<a href="@{Livros.formLivro}" class="btn btn-primary">Novo cadastro</a>
</div>